<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mile High Bibliophiles</title>
    <link href="https://fonts.googleapis.com/css?family=Monoton|Libre+Baskerville|Permanent+Marker|Poppins:500|Ubuntu:300" rel="stylesheet">
  </head>
  <div id='header'>
    <div hidden id='blob'>
    </div>
    <div id='header_color'>
    </div>
    <div id='header_mhb'>Mile High Bibliophiles</div>
  </div>
  <div id='navbar'>
    <% if flash[:failure] %>
      <p id='flash1'><%= flash[:failure] %></p>
      <button id='sign_up'>Sign Up</button>
      <button id='log_in'>Log In</button>
    <% elsif flash[:login_error] %>
      <p id='flash2'><%= flash[:login_error] %></p>
      <button id='sign_up'>Sign Up</button>
      <button id='log_in'>Log In</button>
    <% elsif current_user %>
       <p id='welcome'> Welcome <%= current_user.first_name %> <%= current_user.last_name %></p>
       <%= button_to 'Log Out', session_logout_path, method: 'delete', form_class: 'log_out', id: 'log_out'%>
    <% else %>
      <p id='welcome'>Welcome, please sign in or sign up!</p>
      <button id='sign_up'>Sign Up</button>
      <button id='log_in'>Log In</button>
    <% end %>
  </div>
  <body>
    <div id='sign_up_modal'>
      <div id='sign_up_form'>
        <p id='sign_up_close'>&times;</p>
        <p id='sign_up_message'>SIGN UP FOR MILE HIGH BIBLIOPHILES</p>
        <%= form_tag(users_path, method: 'post', multipart: true) do %>
          <%= label_tag(:first_name, 'First Name', id: 'label') %><br>
          <%= text_field_tag(:first_name, "", class: 'field') %><br>
          <%= label_tag(:last_name, 'Last Name', id: 'label') %><br>
          <%= text_field_tag(:last_name, "", class: 'field') %><br>
          <%= label_tag(:username, 'Create A User Name', id: 'label') %><br>
          <%= text_field_tag(:username, "", class: 'field') %><br>
          <%= label_tag(:password, 'Create A Password', id: 'label') %><br>
          <%= password_field_tag(:password, "", class: 'field') %><br>
          <%= label_tag(:email, 'Your Email', id: 'label') %><br>
          <%= email_field_tag(:email, "", class: 'field') %><br>
          <%= label_tag(:bio, 'Bio', id: 'label') %><br>
          <%= text_area_tag(:bio, "", class: 'field') %><br>
          <%= label_tag(:photo, 'Upload a Photo', id: 'label') %><br>
          <%= file_field_tag(:photo, class: 'field') %><br>
          <%= submit_tag("Become A Bibliophile!", class: 'submit_btn') %>
        <% end %>
      </div>
    </div>
    <div id='log_in_modal'>
      <div id='log_in_form'>
        <p id='log_in_close'>&times;</p>
        <p id='log_in_message'>ENTER YOUR USERNAME AND PASSWORD</p>
        <%= form_tag(session_login_path) do %>
          <%= label_tag(:username, 'User Name', id: 'label') %><br>
          <%= text_field_tag(:username, "", class: 'field') %><br>
          <%= label_tag(:password, 'Password', id: 'label') %><br>
          <%= password_field_tag(:password, "", class: 'field') %><br>
          <%= submit_tag("Log In Bibliophile!", class: 'submit_btn') %>
        <% end %>
      </div>
    </div>
    <div id='message_grid'>
      <div id='message_board'>
      </div>
      <% if current_user %>
      <%= form_for :message, url: api_v1_messages_path, html: {id: 'message_form', method: 'post'} do |f| %>
        <%= f.submit 'Add Message', id: 'add_message_btn' %>
        <%= f.text_field :message %>
        <%= f.hidden_field :user_id, value: current_user.id %>
        <% end %>
      <% end %>
    </div>
  </body>
  <footer>
  </footer>
  <%= javascript_include_tag 'root_page.js' %>
</html>
